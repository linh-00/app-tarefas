<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Tarefas</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- Tela de Login -->
    <div class="container" id="loginScreen">
        <h1>ğŸ”’ Login - Minhas Tarefas</h1>
        
        <div class="login-form">
            <input 
                type="text" 
                id="loginUsername" 
                placeholder="UsuÃ¡rio"
                class="login-input">
            <input 
                type="password" 
                id="loginPassword" 
                placeholder="Senha"
                class="login-input"
                onkeypress="if(event.key === 'Enter') login()">
            <button onclick="login()" class="login-btn">Entrar</button>
            <button onclick="showRegister()" class="register-btn">Criar Conta</button>
        </div>
    </div>

    <!-- Tela de Registro -->
    <div class="container" id="registerScreen" style="display: none;">
        <h1>ğŸ”‘ Criar Conta</h1>
        
        <div class="login-form">
            <input 
                type="text" 
                id="registerUsername" 
                placeholder="UsuÃ¡rio"
                class="login-input">
            <input 
                type="password" 
                id="registerPassword" 
                placeholder="Senha"
                class="login-input">
            <input 
                type="password" 
                id="registerPasswordConfirm" 
                placeholder="Confirmar Senha"
                class="login-input"
                onkeypress="if(event.key === 'Enter') register()">
            <button onclick="register()" class="login-btn">Criar Conta</button>
            <button onclick="showLogin()" class="register-btn">Voltar ao Login</button>
        </div>
    </div>

    <!-- Tela Principal -->
    <div class="container" id="mainScreen" style="display: none;">
        <div class="header-with-logout">
            <h1>ğŸ“ Minhas Tarefas</h1>
            <button onclick="logout()" class="logout-btn">Sair</button>
        </div>
        
        <div class="folder-section">
            <div class="input-container">
                <input 
                    type="text" 
                    id="folderInput" 
                    placeholder="Nome da pasta..."
                    onkeypress="if(event.key === 'Enter') addFolder()">
                <button onclick="addFolder()">ğŸ“ Criar Pasta</button>
            </div>
        </div>

        <div class="loose-tasks-section">
            <h2>ğŸ“‹ Tarefas Soltas</h2>
            <div class="task-form">
                <input 
                    type="text" 
                    id="taskTitle" 
                    placeholder="TÃ­tulo da tarefa..."
                    class="task-title-input">
                <textarea 
                    id="taskDescription" 
                    placeholder="DescriÃ§Ã£o (opcional)..."
                    class="task-description-input"
                    rows="2"></textarea>
                <div class="task-extra-fields">
                    <label class="checkbox-label">
                        <input type="checkbox" id="taskIsToday">
                        <span>â­ Tarefa do dia</span>
                    </label>
                    <label class="difficulty-label">
                        <span>ğŸ¯ Dificuldade:</span>
                        <select id="taskDifficulty" class="difficulty-select">
                            <option value="1">1 - Muito FÃ¡cil</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5" selected>5 - MÃ©dia</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10 - Muito DifÃ­cil</option>
                        </select>
                    </label>
                </div>
                <button onclick="addLooseTask()">+ Adicionar Tarefa</button>
            </div>
            <ul id="looseTasksList" class="task-drop-zone"
                ondragover="handleDragOver(event)"
                ondragleave="handleDragLeave(event)"
                ondrop="handleDrop(event, 'loose')"></ul>
        </div>

        <div class="today-tasks-card" onclick="openTodayTasks()">
            <div class="today-card-icon">â­</div>
            <div class="today-card-content">
                <h3>Tarefas do Dia</h3>
                <p id="todayTaskCount">0 tarefas</p>
            </div>
        </div>

        <div id="foldersContainer"></div>
    </div>

    <!-- Tela da Pasta -->
    <div class="container" id="folderScreen" style="display: none;">
        <div class="folder-header-screen">
            <button class="back-btn" onclick="goBackToMain()">â† Voltar</button>
            <h1 id="folderScreenTitle">ğŸ“ Pasta</h1>
        </div>

        <div class="folder-content">
            <div class="task-form">
                <input 
                    type="text" 
                    id="folderScreenTaskTitle" 
                    placeholder="TÃ­tulo da tarefa..."
                    class="task-title-input">
                <textarea 
                    id="folderScreenTaskDescription" 
                    placeholder="DescriÃ§Ã£o (opcional)..."
                    class="task-description-input"
                    rows="2"></textarea>
                <div class="task-extra-fields">
                    <label class="checkbox-label">
                        <input type="checkbox" id="folderScreenTaskIsToday">
                        <span>â­ Tarefa do dia</span>
                    </label>
                    <label class="difficulty-label">
                        <span>ğŸ¯ Dificuldade:</span>
                        <select id="folderScreenTaskDifficulty" class="difficulty-select">
                            <option value="1">1 - Muito FÃ¡cil</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5" selected>5 - MÃ©dia</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10 - Muito DifÃ­cil</option>
                        </select>
                    </label>
                </div>
                <button onclick="addTaskToCurrentFolder()">+ Adicionar Tarefa</button>
            </div>

            <ul id="folderScreenTasksList"></ul>
        </div>
    </div>

    <!-- Tela de VisualizaÃ§Ã£o da Tarefa -->
    <div class="container" id="taskViewScreen" style="display: none;">
        <div class="folder-header-screen">
            <button class="back-btn" onclick="goBackToFolder()">â† Voltar</button>
            <h1 id="taskViewTitle">ğŸ“‹ Tarefa</h1>
        </div>

        <div class="task-view-content">
            <div class="task-view-header">
                <h2 id="taskViewTitleText"></h2>
                <div class="task-view-actions">
                    <button id="taskViewCompleteBtn" class="complete-btn" onclick="toggleCurrentTask()">Concluir</button>
                    <button class="delete-btn" onclick="deleteCurrentTask()">Excluir Tarefa</button>
                </div>
            </div>
            
            <div class="task-view-meta">
                <span id="taskViewDifficulty" class="difficulty-badge"></span>
                <span id="taskViewTodayBadge" class="today-badge" style="display: none;">â­ Tarefa do Dia</span>
            </div>
            
            <div class="task-view-options">
                <label class="checkbox-label">
                    <input type="checkbox" id="taskViewIsToday" onchange="updateTaskIsToday()">
                    <span>â­ Marcar como Tarefa do Dia</span>
                </label>
                <label class="difficulty-label">
                    <span>ğŸ¯ Dificuldade:</span>
                    <select id="taskViewDifficultySelect" class="difficulty-select" onchange="updateTaskDifficulty()">
                        <option value="1">1 - Muito FÃ¡cil</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 - MÃ©dia</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 - Muito DifÃ­cil</option>
                    </select>
                </label>
            </div>
            
            <div class="task-view-description">
                <h3>DescriÃ§Ã£o:</h3>
                <p id="taskViewDescriptionText"></p>
            </div>
            
            <div class="task-view-observations">
                <h3>ğŸ“ Nova ObservaÃ§Ã£o:</h3>
                <textarea 
                    id="taskViewObservations" 
                    placeholder="Digite aqui uma nova observaÃ§Ã£o sobre o progresso da tarefa..."
                    class="observations-textarea"></textarea>
                <button onclick="saveObservations()" class="save-obs-btn">Salvar ObservaÃ§Ã£o</button>
                
                <h3 style="margin-top: 20px;">ğŸ’¬ ComentÃ¡rios Anteriores:</h3>
                <div id="taskViewCommentsList" style="max-height: 200px; overflow-y: auto;"></div>
            </div>
        </div>
    </div>

    <!-- Tela de Tarefas do Dia -->
    <div class="container" id="todayTasksScreen" style="display: none;">
        <div class="folder-header-screen">
            <button class="back-btn" onclick="goBackToMain()">â† Voltar</button>
            <h1>â­ Tarefas do Dia</h1>
        </div>

        <div class="today-tasks-grid" id="todayTasksGrid"></div>
    </div>

    <!-- Modal de Tarefa do Dia -->
    <div id="todayTaskModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeTodayTaskModal()">&times;</span>
            <div class="modal-header">
                <h2 id="todayModalTitle"></h2>
                <div id="todayModalBadges"></div>
            </div>
            
            <div class="modal-folder" id="todayModalFolder"></div>
            
            <div class="modal-section">
                <h3>DescriÃ§Ã£o:</h3>
                <p id="todayModalDescription"></p>
            </div>
            
            <div class="modal-section">
                <label class="checkbox-label">
                    <input type="checkbox" id="todayModalIsToday" onchange="updateTodayTaskIsToday()">
                    <span>â­ Tarefa do dia</span>
                </label>
                <label class="difficulty-label">
                    <span>ğŸ¯ Dificuldade:</span>
                    <select id="todayModalDifficulty" class="difficulty-select" onchange="updateTodayTaskDifficulty()">
                        <option value="1">1 - Muito FÃ¡cil</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 - MÃ©dia</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 - Muito DifÃ­cil</option>
                    </select>
                </label>
            </div>
            
            <div class="modal-section">
                <h3>ğŸ“ Nova ObservaÃ§Ã£o:</h3>
                <textarea 
                    id="todayModalObservations" 
                    placeholder="Digite aqui uma nova observaÃ§Ã£o sobre o progresso da tarefa..."
                    class="observations-textarea"></textarea>
                <button onclick="saveTodayObservations()" class="save-obs-btn">Salvar ObservaÃ§Ã£o</button>
                
                <h3 style="margin-top: 20px;">ğŸ’¬ ComentÃ¡rios Anteriores:</h3>
                <div id="todayModalCommentsList" style="max-height: 200px; overflow-y: auto;"></div>
            </div>
            
            <div class="modal-actions">
                <button id="todayModalCompleteBtn" onclick="toggleTodayTask()" class="complete-btn">Concluir</button>
                <button onclick="deleteTodayTask()" class="delete-btn">Excluir Tarefa</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
